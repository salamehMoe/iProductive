{"version":3,"sources":["template.js","app/controllers/audit/pre_survey.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ADxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/Users/exsalameh/Desktop/iProductive-2/Resources/iphone/alloy/controllers/audit/pre_survey.js","sourceRoot":"/Users/exsalameh/Desktop/iProductive-2","sourcesContent":["var Alloy = require('/alloy'),\n\tBackbone = Alloy.Backbone,\n\t_ = Alloy._;\n\n\n\n\nfunction __processArg(obj, key) {\n\tvar arg = null;\n\tif (obj) {\n\t\targ = obj[key] || null;\n\t}\n\treturn arg;\n}\n\nfunction Controller() {\n\t\n\trequire('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));\n\tthis.__controllerPath = 'audit/pre_survey';\n\tthis.args = arguments[0] || {};\n\n\tif (arguments[0]) {\n\t\tvar __parentSymbol = __processArg(arguments[0], '__parentSymbol');\n\t\tvar $model = __processArg(arguments[0], '$model');\n\t\tvar __itemTemplate = __processArg(arguments[0], '__itemTemplate');\n\t}\n\tvar $ = this;\n\tvar exports = {};\n\tvar __defers = {};\n\n\t// Generated code that must be executed before all UI and/or\n\t// controller code. One example is all model and collection\n\t// declarations from markup.\n\tAlloy.Collections.instance('stores');Alloy.Collections.instance('employees');Alloy.Collections.instance('answers');\n\n\t// Generated UI code\n\t$.__views[\"pre_survey\"] = Ti.UI.createView(\n{opacity:0,id:\"pre_survey\",title:\"Completed Audits\",}\n);\n$.__views[\"pre_survey\"] && $.addTopLevelView($.__views[\"pre_survey\"]);\n$.__views[\"__alloyId97\"] = Ti.UI.createView(\n{backgroundColor:\"#000000\",opacity:0.7,id:\"__alloyId97\",}\n);\n$.__views[\"pre_survey\"].add($.__views[\"__alloyId97\"]);\nif ((OS_IOS) && Alloy.isTablet) {\n$.__views[\"storesTypePopover\"] = Ti.UI.iPad.createPopover(\n{id:\"storesTypePopover\",}\n);\n$.__views[\"pre_survey\"].add($.__views[\"storesTypePopover\"]);\n$.__views[\"storesList\"] = Ti.UI.createWindow(\n{backgroundColor:\"#ffffff\",translucent:true,tintColor:Alloy.CFG.tintColor,navTintColor:\"#ffffff\",barColor:Alloy.CFG.borderColor,includeOpaqueBars:true,autoAdjustScrollViewInsets:true,statusBarStyle:Ti.UI.iOS.StatusBar.LIGHT_CONTENT,extendEdges:[Ti.UI.EXTEND_EDGE_TOP,Ti.UI.EXTEND_EDGE_BOTTOM,],title:\"Select store Type\",id:\"storesList\",}\n);\nvar __alloyId103=[];$.__views[\"__alloyId104\"] = {properties:{height:50,title:\"All\",id:\"__alloyId104\",},};__alloyId103.push($.__views[\"__alloyId104\"]);$.__views[\"__alloyId105\"] = {properties:{height:50,title:\"Supermarket\",id:\"__alloyId105\",},};__alloyId103.push($.__views[\"__alloyId105\"]);$.__views[\"__alloyId106\"] = {properties:{height:50,title:\"Hypermarket\",id:\"__alloyId106\",},};__alloyId103.push($.__views[\"__alloyId106\"]);$.__views[\"__alloyId101\"] = Ti.UI.createListSection(\n{name:\"type\",id:\"__alloyId101\",}\n);\n$.__views[\"__alloyId101\"].items=__alloyId103;var __alloyId107=[];__alloyId107.push($.__views[\"__alloyId101\"]);$.__views[\"__alloyId100\"] = Ti.UI.createListView(\n{defaultItemTemplate:Ti.UI.LIST_ITEM_TEMPLATE_SUBTITLE,sections:__alloyId107,id:\"__alloyId100\",}\n);\n$.__views[\"storesList\"].add($.__views[\"__alloyId100\"]);\nselectStoreType?$.addListener($.__views[\"__alloyId100\"],'itemclick',selectStoreType):__defers['$.__views[\"__alloyId100\"]!itemclick!selectStoreType']=true;$.__views[\"__alloyId99\"] = Ti.UI.createNavigationWindow(\n{window:$.__views[\"storesList\"],height:300,width:250,id:\"__alloyId99\",}\n);\n$.__views[\"storesTypePopover\"].contentView=$.__views[\"__alloyId99\"];}\nif ((OS_IOS) && Alloy.isTablet) {\n$.__views[\"storesPopover\"] = Ti.UI.iPad.createPopover(\n{id:\"storesPopover\",}\n);\n$.__views[\"pre_survey\"].add($.__views[\"storesPopover\"]);\n$.__views[\"storesList\"] = Ti.UI.createWindow(\n{backgroundColor:\"#ffffff\",translucent:true,tintColor:Alloy.CFG.tintColor,navTintColor:\"#ffffff\",barColor:Alloy.CFG.borderColor,includeOpaqueBars:true,autoAdjustScrollViewInsets:true,statusBarStyle:Ti.UI.iOS.StatusBar.LIGHT_CONTENT,extendEdges:[Ti.UI.EXTEND_EDGE_TOP,Ti.UI.EXTEND_EDGE_BOTTOM,],title:\"Select store\",id:\"storesList\",}\n);\n$.__views[\"__alloyId111\"] = Ti.UI.createListSection(\n{id:\"__alloyId111\",}\n);\nvar __alloyId116=Alloy.Collections['stores'] || stores;function __alloyId117(e) {   if (e && e.fromAdapter) { return; }   var opts = __alloyId117.opts || {};\tvar models = __alloyId116.models;\tvar len = models.length;var __alloyId112=[];\tfor (var i = 0; i < len; i++) {\t\tvar __alloyId113 = models[i];\t\t__alloyId113.__transform = _.isFunction(__alloyId113.transform)?__alloyId113.transform():__alloyId113.toJSON();var __alloyId115 = {properties:{height:50,title:__alloyId113.__transform.StoreDesc,subtitle:__alloyId113.__transform.CountryDesc,StoreCode:__alloyId113.__transform.StoreCode,CountryCode:__alloyId113.__transform.CountryCode,ZoneID:__alloyId113.__transform.ZoneID,ZoneDesc:__alloyId113.__transform.ZoneDesc,CompanyTypeID:__alloyId113.__transform.CompanyTypeID,CompanyTypeDesc:__alloyId113.__transform.CompanyTypeDesc,},};__alloyId112.push(__alloyId115);\t}opts.animation ? $.__views[\"__alloyId111\"].setItems(__alloyId112, opts.animation) : $.__views[\"__alloyId111\"].items = __alloyId112;};__alloyId116.on('fetch destroy change add remove reset',__alloyId117);var __alloyId118=[];__alloyId118.push($.__views[\"__alloyId111\"]);$.__views[\"__alloyId110\"] = Ti.UI.createListView(\n{defaultItemTemplate:Ti.UI.LIST_ITEM_TEMPLATE_SUBTITLE,sections:__alloyId118,id:\"__alloyId110\",}\n);\n$.__views[\"storesList\"].add($.__views[\"__alloyId110\"]);\nselectStore?$.addListener($.__views[\"__alloyId110\"],'itemclick',selectStore):__defers['$.__views[\"__alloyId110\"]!itemclick!selectStore']=true;$.__views[\"__alloyId109\"] = Ti.UI.createNavigationWindow(\n{window:$.__views[\"storesList\"],height:300,width:250,id:\"__alloyId109\",}\n);\n$.__views[\"storesPopover\"].contentView=$.__views[\"__alloyId109\"];}\nif ((OS_IOS) && Alloy.isTablet) {\n$.__views[\"EmployeePopover\"] = Ti.UI.iPad.createPopover(\n{id:\"EmployeePopover\",}\n);\n$.__views[\"pre_survey\"].add($.__views[\"EmployeePopover\"]);\n$.__views[\"employeeList\"] = Ti.UI.createWindow(\n{backgroundColor:\"#ffffff\",translucent:true,tintColor:Alloy.CFG.tintColor,navTintColor:\"#ffffff\",barColor:Alloy.CFG.borderColor,includeOpaqueBars:true,autoAdjustScrollViewInsets:false,statusBarStyle:Ti.UI.iOS.StatusBar.LIGHT_CONTENT,extendEdges:[Ti.UI.EXTEND_EDGE_TOP,Ti.UI.EXTEND_EDGE_BOTTOM,],title:\"Select Employee\",id:\"employeeList\",}\n);\nif ((OS_IOS)) {\n$.__views[\"__alloyId122\"] = Ti.UI.createSearchBar(\n{hintText:\"Search ...\",barColor:\"#115EAC\",tintColor:\"#ffffff\",keyboardType:Titanium.UI.RETURNKEY_SEARCH,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,id:\"__alloyId122\",}\n);\n}\n$.__views[\"__alloyId123\"] = Ti.UI.createListSection(\n{id:\"__alloyId123\",}\n);\nvar __alloyId128=Alloy.Collections['employees'] || employees;function __alloyId129(e) {   if (e && e.fromAdapter) { return; }   var opts = __alloyId129.opts || {};\tvar models = __alloyId128.models;\tvar len = models.length;var __alloyId124=[];\tfor (var i = 0; i < len; i++) {\t\tvar __alloyId125 = models[i];\t\t__alloyId125.__transform = _.isFunction(__alloyId125.transform)?__alloyId125.transform():__alloyId125.toJSON();var __alloyId127 = {properties:{height:50,title:__alloyId125.__transform.Name,EmployeeNo:__alloyId125.__transform.EmployeeNo,StoreCode:__alloyId125.__transform.StoreCode,PositionID:__alloyId125.__transform.PositionID,UserID:__alloyId125.__transform.UserID,searchableText:__alloyId125.__transform.Name,},};__alloyId124.push(__alloyId127);\t}opts.animation ? $.__views[\"__alloyId123\"].setItems(__alloyId124, opts.animation) : $.__views[\"__alloyId123\"].items = __alloyId124;};__alloyId128.on('fetch destroy change add remove reset',__alloyId129);var __alloyId130=[];__alloyId130.push($.__views[\"__alloyId123\"]);$.__views[\"__alloyId121\"] = Ti.UI.createListView(\n{defaultItemTemplate:Ti.UI.LIST_ITEM_TEMPLATE_SUBTITLE,sections:__alloyId130,searchView:$.__views[\"__alloyId122\"],top:43,id:\"__alloyId121\",}\n);\n$.__views[\"employeeList\"].add($.__views[\"__alloyId121\"]);\nselectStore?$.addListener($.__views[\"__alloyId121\"],'itemclick',selectStore):__defers['$.__views[\"__alloyId121\"]!itemclick!selectStore']=true;$.__views[\"__alloyId120\"] = Ti.UI.createNavigationWindow(\n{window:$.__views[\"employeeList\"],height:300,width:250,id:\"__alloyId120\",}\n);\n$.__views[\"EmployeePopover\"].contentView=$.__views[\"__alloyId120\"];}\nif ((OS_IOS) && Alloy.isTablet) {\n$.__views[\"datePopover\"] = Ti.UI.iPad.createPopover(\n{id:\"datePopover\",selectionIndicator:true,}\n);\n$.__views[\"pre_survey\"].add($.__views[\"datePopover\"]);\n$.__views[\"__alloyId133\"] = Ti.UI.createWindow(\n{backgroundColor:\"#ffffff\",translucent:true,tintColor:Alloy.CFG.tintColor,navTintColor:\"#ffffff\",barColor:Alloy.CFG.borderColor,includeOpaqueBars:true,autoAdjustScrollViewInsets:true,statusBarStyle:Ti.UI.iOS.StatusBar.LIGHT_CONTENT,extendEdges:[Ti.UI.EXTEND_EDGE_TOP,Ti.UI.EXTEND_EDGE_BOTTOM,],title:\"Start date\",id:\"__alloyId133\",}\n);\n$.__views[\"datePicker\"] = Ti.UI.createPicker(\n{format24:false,calendarViewShown:false,id:\"datePicker\",enabled:false,type:Ti.UI.PICKER_TYPE_DATE,}\n);\n$.__views[\"__alloyId133\"].add($.__views[\"datePicker\"]);\nselectDate?$.addListener($.__views[\"datePicker\"],'change',selectDate):__defers['$.__views[\"datePicker\"]!change!selectDate']=true;$.__views[\"__alloyId132\"] = Ti.UI.createNavigationWindow(\n{window:$.__views[\"__alloyId133\"],height:200,width:250,id:\"__alloyId132\",}\n);\n$.__views[\"datePopover\"].contentView=$.__views[\"__alloyId132\"];}\n$.__views[\"containner\"] = Ti.UI.createView(\n{layout:\"vertical\",height:Ti.UI.SIZE,backgroundColor:\"#ffffff\",width:\"80%\",borderRadius:2,id:\"containner\",}\n);\n$.__views[\"pre_survey\"].add($.__views[\"containner\"]);\n$.__views[\"__alloyId134\"] = Ti.UI.createView(\n{height:60,id:\"__alloyId134\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId134\"]);\n$.__views[\"__alloyId135\"] = Ti.UI.createImageView(\n{width:50,height:50,image:\"/appicon.png\",left:10,id:\"__alloyId135\",}\n);\n$.__views[\"__alloyId134\"].add($.__views[\"__alloyId135\"]);\n$.__views[\"titleLbl\"] = Ti.UI.createLabel(\n{textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,left:70,font:{fontSize:22,},id:\"titleLbl\",}\n);\n$.__views[\"__alloyId134\"].add($.__views[\"titleLbl\"]);\n$.__views[\"__alloyId136\"] = Ti.UI.createView(\n{height:1,backgroundColor:\"gray\",id:\"__alloyId136\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId136\"]);\n$.__views[\"__alloyId137\"] = Ti.UI.createView(\n{backgroundColor:\"silver\",layout:\"horizontal\",width:\"80%\",height:42,top:20,id:\"__alloyId137\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId137\"]);\n$.__views[\"__alloyId138\"] = Ti.UI.createLabel(\n{textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,backgroundColor:\"#ffffff\",left:1,bottom:1,height:Ti.UI.FILL,width:150,color:\"silver\",text:'Audit Template',id:\"__alloyId138\",}\n);\n$.__views[\"__alloyId137\"].add($.__views[\"__alloyId138\"]);\n$.__views[\"tempName\"] = Ti.UI.createTextField(\n{leftButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,rightButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,backgroundColor:\"#ffffff\",left:0,bottom:1,width:Ti.UI.FILL,height:Ti.UI.FILL,padding:{right:10,},editable:false,id:\"tempName\",next:\"password\",}\n);\n$.__views[\"__alloyId137\"].add($.__views[\"tempName\"]);\n$.__views[\"storetypeContainer\"] = Ti.UI.createView(\n{backgroundColor:\"silver\",layout:\"horizontal\",width:\"80%\",height:42,top:20,id:\"storetypeContainer\",}\n);\n$.__views[\"containner\"].add($.__views[\"storetypeContainer\"]);\n$.__views[\"storeTypeinForm\"] = Ti.UI.createLabel(\n{textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,backgroundColor:\"#ffffff\",left:1,bottom:1,height:Ti.UI.FILL,width:150,color:\"silver\",text:'Store Type',id:\"storeTypeinForm\",}\n);\n$.__views[\"storetypeContainer\"].add($.__views[\"storeTypeinForm\"]);\n$.__views[\"__alloyId140\"] = Ti.UI.createButton(\n{image:\"/images/icons/user.png\",id:\"__alloyId140\",}\n);\n$.__views[\"storeType\"] = Ti.UI.createTextField(\n{leftButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,rightButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,backgroundColor:\"#ffffff\",left:0,bottom:1,width:Ti.UI.FILL,height:Ti.UI.FILL,padding:{right:10,},editable:false,rightButton:$.__views[\"__alloyId140\"],id:\"storeType\",}\n);\n$.__views[\"storetypeContainer\"].add($.__views[\"storeType\"]);\nstoresTypePickerShow?$.addListener($.__views[\"storeType\"],'click',storesTypePickerShow):__defers['$.__views[\"storeType\"]!click!storesTypePickerShow']=true;$.__views[\"__alloyId140\"] = Ti.UI.createButton(\n{rightButton:$.__views[\"__alloyId140\"],id:\"storeType\",left:0,image:\"/images/icons/user.png\",}\n);\n$.__views[\"__alloyId141\"] = Ti.UI.createView(\n{backgroundColor:\"silver\",layout:\"horizontal\",width:\"80%\",height:42,top:20,id:\"__alloyId141\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId141\"]);\n$.__views[\"storeinForm\"] = Ti.UI.createLabel(\n{textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,backgroundColor:\"#ffffff\",left:1,bottom:1,height:Ti.UI.FILL,width:150,color:\"silver\",editable:false,text:'Store',id:\"storeinForm\",}\n);\n$.__views[\"__alloyId141\"].add($.__views[\"storeinForm\"]);\n$.__views[\"__alloyId143\"] = Ti.UI.createButton(\n{image:\"/images/icons/user.png\",id:\"__alloyId143\",}\n);\n$.__views[\"store\"] = Ti.UI.createTextField(\n{leftButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,rightButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,backgroundColor:\"#ffffff\",left:0,bottom:1,width:Ti.UI.FILL,height:Ti.UI.FILL,padding:{right:10,},editable:false,rightButton:$.__views[\"__alloyId143\"],id:\"store\",}\n);\n$.__views[\"__alloyId141\"].add($.__views[\"store\"]);\nstoresPickerShow?$.addListener($.__views[\"store\"],'click',storesPickerShow):__defers['$.__views[\"store\"]!click!storesPickerShow']=true;$.__views[\"__alloyId143\"] = Ti.UI.createButton(\n{rightButton:$.__views[\"__alloyId143\"],id:\"store\",left:0,image:\"/images/icons/user.png\",}\n);\n$.__views[\"__alloyId144\"] = Ti.UI.createView(\n{backgroundColor:\"silver\",layout:\"horizontal\",width:\"80%\",height:42,top:20,id:\"__alloyId144\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId144\"]);\n$.__views[\"__alloyId145\"] = Ti.UI.createLabel(\n{textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,backgroundColor:\"#ffffff\",left:1,bottom:1,height:Ti.UI.FILL,width:150,color:\"silver\",text:'Start date',id:\"__alloyId145\",}\n);\n$.__views[\"__alloyId144\"].add($.__views[\"__alloyId145\"]);\n$.__views[\"__alloyId147\"] = Ti.UI.createButton(\n{image:\"/images/icons/calendar.png\",id:\"__alloyId147\",}\n);\n$.__views[\"date\"] = Ti.UI.createTextField(\n{leftButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,rightButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,backgroundColor:\"#ffffff\",left:0,bottom:1,width:Ti.UI.FILL,height:Ti.UI.FILL,padding:{right:10,},editable:false,rightButton:$.__views[\"__alloyId147\"],id:\"date\",ref:\"date\",}\n);\n$.__views[\"__alloyId144\"].add($.__views[\"date\"]);\ndatePickerShow?$.addListener($.__views[\"date\"],'click',datePickerShow):__defers['$.__views[\"date\"]!click!datePickerShow']=true;$.__views[\"__alloyId147\"] = Ti.UI.createButton(\n{rightButton:$.__views[\"__alloyId147\"],id:\"date\",ref:\"date\",left:0,image:\"/images/icons/calendar.png\",}\n);\n$.__views[\"__alloyId148\"] = Ti.UI.createView(\n{backgroundColor:\"silver\",layout:\"horizontal\",width:\"80%\",height:42,top:20,id:\"__alloyId148\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId148\"]);\n$.__views[\"__alloyId149\"] = Ti.UI.createLabel(\n{textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,backgroundColor:\"#ffffff\",left:1,bottom:1,height:Ti.UI.FILL,width:150,color:\"silver\",text:'Audit by',id:\"__alloyId149\",}\n);\n$.__views[\"__alloyId148\"].add($.__views[\"__alloyId149\"]);\n$.__views[\"auditBy\"] = Ti.UI.createTextField(\n{leftButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,rightButtonMode:Ti.UI.INPUT_BUTTONMODE_ALWAYS,backgroundColor:\"#ffffff\",left:0,bottom:1,width:Ti.UI.FILL,height:Ti.UI.FILL,padding:{right:10,},editable:false,id:\"auditBy\",}\n);\n$.__views[\"__alloyId148\"].add($.__views[\"auditBy\"]);\n$.__views[\"__alloyId150\"] = Ti.UI.createView(\n{layout:\"horizontal\",right:\"10%\",top:20,width:Ti.UI.SIZE,height:40,id:\"__alloyId150\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId150\"]);\n$.__views[\"backBtn\"] = Ti.UI.createButton(\n{color:\"#ffffff\",tintColor:\"#ffffff\",backgroundColor:Alloy.CFG.tintColor,borderRadius:2,font:{fontSize:22,},width:100,right:20,title:'Cancel',id:\"backBtn\",}\n);\n$.__views[\"__alloyId150\"].add($.__views[\"backBtn\"]);\nback?$.addListener($.__views[\"backBtn\"],'click',back):__defers['$.__views[\"backBtn\"]!click!back']=true;$.__views[\"startBtn\"] = Ti.UI.createButton(\n{color:\"#ffffff\",tintColor:\"#ffffff\",backgroundColor:Alloy.CFG.borderColor,borderRadius:2,font:{fontSize:22,},width:180,title:'Start Audit',id:\"startBtn\",}\n);\n$.__views[\"__alloyId150\"].add($.__views[\"startBtn\"]);\nstartSurvey?$.addListener($.__views[\"startBtn\"],'click',startSurvey):__defers['$.__views[\"startBtn\"]!click!startSurvey']=true;$.__views[\"__alloyId151\"] = Ti.UI.createView(\n{height:20,id:\"__alloyId151\",}\n);\n$.__views[\"containner\"].add($.__views[\"__alloyId151\"]);\nexports.destroy = function () {__alloyId116 && __alloyId116.off('fetch destroy change add remove reset',__alloyId117);__alloyId128 && __alloyId128.off('fetch destroy change add remove reset',__alloyId129);};\n\n\t// make all IDed elements in $.__views available right on the $ in a\n\t// controller's internal code. Externally the IDed elements will\n\t// be accessed with getView().\n\t_.extend($, $.__views);\n\n\t// Controller code directly from the developer's controller file\n\t__MAPMARKER_CONTROLLER_CODE__\n\n\t// Generated code that must be executed after all UI and\n\t// controller code. One example deferred event handlers whose\n\t// functions are not defined until after the controller code\n\t// is executed.\n\t__defers['$.__views[\"__alloyId100\"]!itemclick!selectStoreType'] && $.addListener($.__views[\"__alloyId100\"],'itemclick',selectStoreType);__defers['$.__views[\"__alloyId110\"]!itemclick!selectStore'] && $.addListener($.__views[\"__alloyId110\"],'itemclick',selectStore);__defers['$.__views[\"__alloyId121\"]!itemclick!selectStore'] && $.addListener($.__views[\"__alloyId121\"],'itemclick',selectStore);__defers['$.__views[\"datePicker\"]!change!selectDate'] && $.addListener($.__views[\"datePicker\"],'change',selectDate);__defers['$.__views[\"storeType\"]!click!storesTypePickerShow'] && $.addListener($.__views[\"storeType\"],'click',storesTypePickerShow);__defers['$.__views[\"store\"]!click!storesPickerShow'] && $.addListener($.__views[\"store\"],'click',storesPickerShow);__defers['$.__views[\"date\"]!click!datePickerShow'] && $.addListener($.__views[\"date\"],'click',datePickerShow);__defers['$.__views[\"backBtn\"]!click!back'] && $.addListener($.__views[\"backBtn\"],'click',back);__defers['$.__views[\"startBtn\"]!click!startSurvey'] && $.addListener($.__views[\"startBtn\"],'click',startSurvey);\n\n\t// Extend the $ instance with all functions and properties\n\t// defined on the exports object.\n\t_.extend($, exports);\n}\n\nmodule.exports = Controller;\n","var onNext = null,\nitem = {},\nlastSelectedStore = {};\nvar lastSelectedStoreType = {};\n\n\nvar today = new Date();\n$.datePicker.setValue(today);\n$.date.setValue(today.getFullYear() + '-' + (\"0\" + (today.getMonth() + 1)).slice(-2) + '-' + (\"0\" + today.getDate()).slice(-2));\n$.date.saveDate = Alloy.Globals.getFullDate();\n\n$.auditBy.setValue(Alloy.Globals.user.get('Username'));\n\nvar storesPickerShow = function () {\n  //alert(item.DeptCode);\n  if (item.type == 2) {\n    $.EmployeePopover.show({\n      view: $.store });\n\n\n  } else {\n    $.storesPopover.show({\n      view: $.store });\n\n\n  }\n\n};\n\nvar storesTypePickerShow = function () {\n  //Ti.API.Info('####### item: '+JSON.stringify(item));\n  //alert(item.DeptCode);\n  if (item.type == 2) {\n    // $.EmployeePopover.show({\n    //     view : $.store\n    // });\n\n  } else {\n    $.storesTypePopover.show({\n      view: $.store });\n\n\n  }\n\n};\n\nvar storesTypePickerHide = function () {\n  if (item.type == 2) {\n    $.EmployeePopover.hide();\n  } else {\n    $.storesTypePopover.hide();\n  }\n\n};\n\n\nvar storesPickerHide = function () {\n  if (item.type == 2) {\n    $.EmployeePopover.hide();\n  } else {\n    $.storesPopover.hide();\n  }\n\n};\n\nvar selectStoreType = function (e) {\n  storesTypePickerHide();\n  lastSelectedStoreType = e.section.getItemAt(e.itemIndex);\n\n  // mark check\n  if (lastSelectedStoreType.properties.accessoryType == Ti.UI.LIST_ACCESSORY_TYPE_NONE) {\n    lastSelectedStoreType.properties.accessoryType = Ti.UI.LIST_ACCESSORY_TYPE_CHECKMARK;\n  } else {\n    lastSelectedStoreType.properties.accessoryType = Ti.UI.LIST_ACCESSORY_TYPE_NONE;\n  }\n  e.section.updateItemAt(e.itemIndex, lastSelectedStoreType);\n\n  // un-mark\n  if ($.storeType.lastIndex != e.itemIndex) {\n    try {\n      var lastItem = e.section.getItemAt($.storeType.lastIndex);\n      lastItem.properties.accessoryType = Ti.UI.LIST_ACCESSORY_TYPE_NONE;\n      e.section.updateItemAt($.storeType.lastIndex, lastItem);\n    }\n    catch (e)\n    {}\n  }\n\n  $.storeType.lastIndex = e.itemIndex;\n  switch (e.itemIndex) {\n    case 0:\n\n      try {\n        Alloy.Collections.stores.fetch({\n          query: \"SELECT * from stores\" });\n\n      } catch (e) {\n        //Ti.API.Info('error -> '+JSON.stringify(e));\n      }\n      break;\n    case 1:\n      try {\n        Alloy.Collections.stores.fetch({\n          query: \"SELECT * from stores WHERE CompanyTypeDesc = 'Supermarket'\" });\n\n      } catch (e) {\n        //Ti.API.Info('error -> '+JSON.stringify(e));\n      }\n\n      break;\n    case 2:\n      try {\n        Alloy.Collections.stores.fetch({\n          query: \"SELECT * from stores WHERE CompanyTypeDesc = 'Hypermarket'\" });\n\n      } catch (e) {\n        //Ti.API.Info('error -> '+JSON.stringify(e));\n      }\n      break;}\n\n  $.storeType.setValue(lastSelectedStoreType.properties.title);\n};\n\nvar selectStore = function (e) {\n  storesPickerHide();\n  lastSelectedStore = e.section.getItemAt(e.itemIndex);\n\n  // mark check\n  if (lastSelectedStore.properties.accessoryType == Ti.UI.LIST_ACCESSORY_TYPE_NONE) {\n    lastSelectedStore.properties.accessoryType = Ti.UI.LIST_ACCESSORY_TYPE_CHECKMARK;\n  } else {\n    lastSelectedStore.properties.accessoryType = Ti.UI.LIST_ACCESSORY_TYPE_NONE;\n  }\n  e.section.updateItemAt(e.itemIndex, lastSelectedStore);\n\n  // un-mark\n  if ($.store.lastIndex != e.itemIndex) {\n    try {\n      var lastItem = e.section.getItemAt($.store.lastIndex);\n      lastItem.properties.accessoryType = Ti.UI.LIST_ACCESSORY_TYPE_NONE;\n      e.section.updateItemAt($.store.lastIndex, lastItem);\n    }\n    catch (e)\n    {}\n  }\n\n  $.store.lastIndex = e.itemIndex;\n  $.store.setValue(lastSelectedStore.properties.title);\n};\nvar datePickerShow = function (e) {\n  return;\n  $.datePopover.show({\n    view: $[e.source.ref] });\n\n\n  $.datePopover.ref = e.source.ref;\n};\nvar selectDate = function (e) {\n  $[$.datePopover.ref].setValue(e.value.getFullYear() + '-' + (\"0\" + (e.value.getMonth() + 1)).slice(-2) + '-' + (\"0\" + e.value.getDate()).slice(-2));\n  $[$.datePopover.ref].saveDate = Alloy.Globals.getFullDate(e.value);\n  $.datePopover.hide();\n};\n\n\nexports.show = function (e) {\n  //Ti.API.Info (\"Entering Show: \" + e.item.title);\n  //Ti.API.Info('show test 1');\n  onNext = e.onNext || null;\n  //Ti.API.Info('show test 2');\n  item = e.item || {};\n  //Ti.API.Info('show test 3');\n  $.titleLbl.setText(e.item.title);\n  //Ti.API.Info('show test 4');\n  $.tempName.setValue(e.item.title);\n  //Ti.API.Info('show test 5');\n  $.storeType.setValue(\"All\");\n  //Ti.API.Info('show test 6');\n  if (item.type == 2) {\n    //Ti.API.Info('show test 7');\n    try {\n      Alloy.Collections.employees.fetch({\n        query: \"SELECT * from employees WHERE AuditID = \" + item.AuditID });\n\n    } catch (e) {\n\n    } //Ti.API.Info('error -> '+JSON.stringify(e));\n    //Ti.API.Info('show test 8');\n  } else {\n    //Ti.API.Info('show test 9');\n    Alloy.Collections.stores.fetch();\n  }\n  //Ti.API.Info('show test 10');\n  if (item.type == 2) {\n    //Ti.API.Info('show test 11');\n    $.storeinForm.setText(\"Employee Name\");\n    //Ti.API.Info('show test 12');\n    $.storetypeContainer.visible = false;\n    //Ti.API.Info('show test 13');\n    $.storetypeContainer.height = 0;\n    //Ti.API.Info('show test 14');\n\n  } else {\n    //Ti.API.Info('show test 15');\n    $.storeinForm.setText(\"Store\");\n    $.storetypeContainer.visible = true;\n    $.storetypeContainer.height = \"42dp\";\n  }\n  //Ti.API.Info('show test 16');\n  $.store.setValue('');\n  //Ti.API.Info('show test 17');\n  $.pre_survey.animate({\n    opacity: 1 });\n\n};\n\nexports.hide = function () {\n\n  $.pre_survey.animate({\n    opacity: 0 },\n  function () {\n    //$.destroy();\n  });\n\n  if (!OS_IOS) {\n    $.pre_survey.getParent().remove($.pre_survey);\n  }\n};\n\nvar startSurvey = function () {\n\n  if (lastSelectedStore == {} || $.date.getValue().length == 0) {\n    Ti.UI.createAlertDialog({\n      title: 'Error',\n      message: 'Fill the form please' }).\n    show();\n    return;\n  }\n\n  if (item.type == 2) {\n    var myModel = Alloy.createModel('auditRecord', {\n      storeCode: lastSelectedStore.properties.StoreCode,\n      auditID: item.AuditID,\n      deptCode: item.DeptCode,\n      submittedBy: Alloy.Globals.user.get('ldap_user'),\n      openDate: $.date.saveDate,\n      EmployeeNo: lastSelectedStore.properties.EmployeeNo,\n      UserID: lastSelectedStore.properties.UserID,\n      PositionID: lastSelectedStore.properties.PositionID });\n\n\n\n  } else {\n\n    var myModel = Alloy.createModel('auditRecord', {\n      storeCode: lastSelectedStore.properties.StoreCode,\n      auditID: item.AuditID,\n      deptCode: item.DeptCode,\n      submittedBy: Alloy.Globals.user.get('ldap_user'),\n      openDate: $.date.saveDate });\n\n  }\n  myModel.save();\n\n  // copy questions to empty answers\n  myModel.createEmptyAnswers(item.type);\n\n  if (onNext) {\n    onNext({\n      auditRecordID: myModel.get('id'),\n      deptCode: myModel.get('deptCode'),\n      store: lastSelectedStore.properties,\n      date: $.date.getValue() });\n\n  }\n  exports.hide();\n};\n\nvar back = function () {\n  // rewrite the default Date\n  $.datePicker.setValue(today);\n  $.date.setValue(today.getFullYear() + \"-\" + (1 + today.getMonth()) + \"-\" + today.getDate());\n\n  exports.hide();\n\n\n};"]}