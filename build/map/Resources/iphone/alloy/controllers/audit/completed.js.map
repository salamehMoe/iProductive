{"version":3,"sources":["template.js","app/controllers/audit/completed.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ADoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/Users/exsalameh/Desktop/iProductive-2/Resources/iphone/alloy/controllers/audit/completed.js","sourceRoot":"/Users/exsalameh/Desktop/iProductive-2","sourcesContent":["var Alloy = require('/alloy'),\n\tBackbone = Alloy.Backbone,\n\t_ = Alloy._;\n\n\n\n\nfunction __processArg(obj, key) {\n\tvar arg = null;\n\tif (obj) {\n\t\targ = obj[key] || null;\n\t}\n\treturn arg;\n}\n\nfunction Controller() {\n\t\n\trequire('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));\n\tthis.__controllerPath = 'audit/completed';\n\tthis.args = arguments[0] || {};\n\n\tif (arguments[0]) {\n\t\tvar __parentSymbol = __processArg(arguments[0], '__parentSymbol');\n\t\tvar $model = __processArg(arguments[0], '$model');\n\t\tvar __itemTemplate = __processArg(arguments[0], '__itemTemplate');\n\t}\n\tvar $ = this;\n\tvar exports = {};\n\tvar __defers = {};\n\n\t// Generated code that must be executed before all UI and/or\n\t// controller code. One example is all model and collection\n\t// declarations from markup.\n\tAlloy.Collections.instance('auditRecord');\n\n\t// Generated UI code\n\t$.__views[\"completed\"] = (require(\"xp.ui\").createWindow || Ti.UI.createWindow)(\n{backgroundColor:\"#ffffff\",translucent:true,tintColor:Alloy.CFG.tintColor,navTintColor:\"#ffffff\",barColor:Alloy.CFG.borderColor,includeOpaqueBars:true,autoAdjustScrollViewInsets:false,statusBarStyle:Ti.UI.iOS.StatusBar.LIGHT_CONTENT,extendEdges:[Ti.UI.EXTEND_EDGE_TOP,Ti.UI.EXTEND_EDGE_BOTTOM,],title:\"Completed\",id:\"completed\",}\n);\n$.__views[\"completed\"] && $.addTopLevelView($.__views[\"completed\"]);\n$.__views[\"__alloyId11\"] = Alloy.createController('centerNavBtns',{id:\"__alloyId11\",__parentSymbol:$.__views[\"completed\"],});\n$.__views[\"__alloyId11\"].setParent($.__views[\"completed\"]);\nif ((OS_IOS)) {\n$.__views[\"__alloyId12\"] = Ti.UI.createSearchBar(\n{hintText:\"Search ...\",barColor:\"#115EAC\",tintColor:\"#ffffff\",keyboardType:Titanium.UI.RETURNKEY_SEARCH,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,id:\"__alloyId12\",}\n);\n}\nvar __alloyId13={};var __alloyId16=[];var __alloyId17={type:'Ti.UI.Label',bindId:'info',properties:{textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,color:\"black\",left:\"10dp\",top:\"15dp\",bindId:\"info\",},};__alloyId16.push(__alloyId17);var __alloyId18={type:'Ti.UI.Label',bindId:'es_info',properties:{textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:\"10dp\",},left:\"10dp\",top:\"40dp\",color:\"black\",bindId:\"es_info\",},};__alloyId16.push(__alloyId18);var __alloyId15 = {properties:{name:\"template\",},childTemplates:__alloyId16,};__alloyId13[\"template\"]=__alloyId15;$.__views[\"headerView\"] = Ti.UI.createView(\n{backgroundColor:\"#efefef\",height:60,id:\"headerView\",}\n);\n$.__views[\"__alloyId22\"] = Ti.UI.createLabel(\n{textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,text:'Completed audits which are not yet submitted to the server. Perform a sync to update the server.',id:\"__alloyId22\",}\n);\n$.__views[\"headerView\"].add($.__views[\"__alloyId22\"]);\n$.__views[\"__alloyId19\"] = Ti.UI.createListSection(\n{headerView:$.__views[\"headerView\"],id:\"__alloyId19\",}\n);\nvar __alloyId26=Alloy.Collections['auditRecord'] || auditRecord;function __alloyId27(e) {   if (e && e.fromAdapter) { return; }   var opts = __alloyId27.opts || {};\tvar models = __alloyId26.models;\tvar len = models.length;var __alloyId20=[];\tfor (var i = 0; i < len; i++) {\t\tvar __alloyId23 = models[i];\t\t__alloyId23.__transform = transformFunction(__alloyId23);var __alloyId25 = {properties:{height:70,accessoryType:Ti.UI.LIST_ACCESSORY_TYPE_DISCLOSURE,searchableText:__alloyId23.__transform.AuditName,auditRecordID:__alloyId23.__transform.id,storeCode:__alloyId23.__transform.storeCode,deptCode:__alloyId23.__transform.deptCode,AuditID:__alloyId23.__transform.AuditID,openDate:__alloyId23.__transform.openDate,submisiondDate:__alloyId23.__transform.submisiondDate,submittedBy:__alloyId23.__transform.submittedBy,online_id:__alloyId23.__transform.online_id,CompanyTypeID:__alloyId23.__transform.CompanyTypeID,DeptCode:__alloyId23.__transform.DeptCode,AuditDesc:__alloyId23.__transform.AuditDesc,Target:__alloyId23.__transform.Target,type:__alloyId23.__transform.type,comment:__alloyId23.__transform.comment,},info:{text:__alloyId23.__transform.AuditName,},es_info:{text:__alloyId23.__transform.subTitle,},};__alloyId20.push(__alloyId25);\t}opts.animation ? $.__views[\"__alloyId19\"].setItems(__alloyId20, opts.animation) : $.__views[\"__alloyId19\"].items = __alloyId20;};__alloyId26.on('fetch destroy change add remove reset',__alloyId27);var __alloyId28=[];__alloyId28.push($.__views[\"__alloyId19\"]);$.__views[\"list\"] = Ti.UI.createListView(\n{defaultItemTemplate:\"template\",top:62,sections:__alloyId28,templates:__alloyId13,searchView:$.__views[\"__alloyId12\"],id:\"list\",}\n);\n$.__views[\"completed\"].add($.__views[\"list\"]);\nopenTemplate?$.addListener($.__views[\"list\"],'itemclick',openTemplate):__defers['$.__views[\"list\"]!itemclick!openTemplate']=true;exports.destroy = function () {__alloyId26 && __alloyId26.off('fetch destroy change add remove reset',__alloyId27);};\n\n\t// make all IDed elements in $.__views available right on the $ in a\n\t// controller's internal code. Externally the IDed elements will\n\t// be accessed with getView().\n\t_.extend($, $.__views);\n\n\t// Controller code directly from the developer's controller file\n\t__MAPMARKER_CONTROLLER_CODE__\n\n\t// Generated code that must be executed after all UI and\n\t// controller code. One example deferred event handlers whose\n\t// functions are not defined until after the controller code\n\t// is executed.\n\t__defers['$.__views[\"list\"]!itemclick!openTemplate'] && $.addListener($.__views[\"list\"],'itemclick',openTemplate);\n\n\t// Extend the $ instance with all functions and properties\n\t// defined on the exports object.\n\t_.extend($, exports);\n}\n\nmodule.exports = Controller;\n","var openTemplate = function (e) {\n\n  var item = e.section.getItemAt(e.itemIndex);\n\n  Alloy.Globals.pageStack.open(Alloy.createController('audit/sections', {\n    item: item.properties,\n    formPrams: {\n      auditRecordID: item.properties.auditRecordID,\n      deptCode: item.properties.deptCode,\n      store: item.properties.storeCode,\n      date: item.properties.openDate,\n      comment: item.properties.comment },\n\n    notEditable: true }).\n  getView());\n\n};\n\nfunction transformFunction(model) {\n  var transform = model.toJSON();\n  transform.subTitle = transform.storeCode + \" / \" + transform.openDate;\n  return transform;\n}\ntry {\n  Alloy.Collections.auditRecord.fetch({\n    query: \"SELECT a.*, t.* FROM auditRecord a JOIN templates t ON t.AuditID = a.AuditID WHERE length(a.submisiondDate) > 3 AND a.online_id = ''\" });\n\n} catch (e) {\n  //Ti.API.Info('error -> '+JSON.stringify(e));\n}\n\n\n$.completed.addEventListener(\"close\", function () {\n  $.destroy();\n});"]}