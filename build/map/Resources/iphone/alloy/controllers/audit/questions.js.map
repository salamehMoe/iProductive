{"version":3,"sources":["template.js","app/controllers/audit/questions.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AD/9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/Users/exsalameh/Desktop/iProductive-2/Resources/iphone/alloy/controllers/audit/questions.js","sourceRoot":"/Users/exsalameh/Desktop/iProductive-2","sourcesContent":["var Alloy = require('/alloy'),\n\tBackbone = Alloy.Backbone,\n\t_ = Alloy._;\n\n\n\n\nfunction __processArg(obj, key) {\n\tvar arg = null;\n\tif (obj) {\n\t\targ = obj[key] || null;\n\t}\n\treturn arg;\n}\n\nfunction Controller() {\n\t\n\trequire('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));\n\tthis.__controllerPath = 'audit/questions';\n\tthis.args = arguments[0] || {};\n\n\tif (arguments[0]) {\n\t\tvar __parentSymbol = __processArg(arguments[0], '__parentSymbol');\n\t\tvar $model = __processArg(arguments[0], '$model');\n\t\tvar __itemTemplate = __processArg(arguments[0], '__itemTemplate');\n\t}\n\tvar $ = this;\n\tvar exports = {};\n\tvar __defers = {};\n\n\t// Generated code that must be executed before all UI and/or\n\t// controller code. One example is all model and collection\n\t// declarations from markup.\n\t\n\n\t// Generated UI code\n\t$.__views[\"questions\"] = (require(\"xp.ui\").createWindow || Ti.UI.createWindow)(\n{backgroundColor:\"#ffffff\",translucent:true,tintColor:Alloy.CFG.tintColor,navTintColor:\"#ffffff\",barColor:Alloy.CFG.borderColor,includeOpaqueBars:true,autoAdjustScrollViewInsets:true,statusBarStyle:Ti.UI.iOS.StatusBar.LIGHT_CONTENT,extendEdges:[Ti.UI.EXTEND_EDGE_TOP,Ti.UI.EXTEND_EDGE_BOTTOM,],id:\"questions\",}\n);\n$.__views[\"questions\"] && $.addTopLevelView($.__views[\"questions\"]);\nvar __alloyId155={};var __alloyId158=[];var __alloyId160={type:'Ti.UI.View',childTemplates: (function() {var __alloyId161=[];var __alloyId163={type:'Ti.UI.Label',bindId:'QuestionDesc',properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,left:22,top:10,verticalAlign:\"top\",color:\"black\",font:{fontSize:20,},bindId:\"QuestionDesc\",},};__alloyId161.push(__alloyId163);var __alloyId165={type:'Ti.UI.TextArea',bindId:'PreviousAnswer',properties:{color:\"red\",left:22,top:10,verticalAlign:\"top\",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:20,},height:Ti.UI.SIZE,right:22,bindId:\"PreviousAnswer\",},events:{change:protectPreviousAnswer,},};__alloyId161.push(__alloyId165);var __alloyId167={type:'Ti.UI.View',bindId:'commentPhotosContainer',childTemplates: (function() {var __alloyId168=[];var __alloyId170={type:'Ti.UI.Label',bindId:'yes',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"yes\",text:\"Yes\",right:100,top:0,},};__alloyId168.push(__alloyId170);var __alloyId172={type:'Ti.UI.Label',bindId:'no',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"no\",text:\"No\",right:10,top:0,},};__alloyId168.push(__alloyId172);var __alloyId174={type:'Ti.UI.Label',bindId:'na',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"na\",text:\"NA\",right:100,top:60,},};__alloyId168.push(__alloyId174);var __alloyId176={type:'Ti.UI.Label',bindId:'pd',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"pd\",text:\"PD\",right:10,top:60,},};__alloyId168.push(__alloyId176);var __alloyId178={type:'Ti.UI.TextArea',bindId:'commentTxtArea',properties:{color:Alloy.CFG.borderColor,top:0,hintText:\"comment....\",padding:{right:3,},font:{fontSize:18,},height:57,left:22,right:200,borderColor:\"#115EAC\",borderWidth:1,borderRadius:6,keyboardType:Ti.UI.KEYBOARD_DEFAULT,returnKeyType:Ti.UI.RETURNKEY_DONE,bindId:\"commentTxtArea\",},events:{blur:saveComment,focus:showAlertdialog,},};__alloyId168.push(__alloyId178);var __alloyId180={type:'Ti.UI.ImageView',bindId:'camera',properties:{bottom:15,image:\"/images/icons/camera.png\",width:40,height:35,left:30,bindId:\"camera\",},};__alloyId168.push(__alloyId180);var __alloyId182={type:'Ti.UI.ImageView',bindId:'Image',properties:{bottom:5,image:\"/images/Carrefour-Logo.jpg\",width:75,height:75,bindId:\"Image\",left:85,},};__alloyId168.push(__alloyId182);var __alloyId184={type:'Ti.UI.ImageView',bindId:'Image1',properties:{bottom:5,image:\"/images/Carrefour-Logo.jpg\",width:75,height:75,bindId:\"Image1\",left:165,},};__alloyId168.push(__alloyId184);return __alloyId168;})(),properties:{top:10,height:115,bindId:\"commentPhotosContainer\",},};__alloyId161.push(__alloyId167);return __alloyId161;})(),properties:{layout:\"vertical\",height:Ti.UI.SIZE,},};__alloyId158.push(__alloyId160);var __alloyId157 = {properties:{width:\"100%\",height:Ti.UI.SIZE,selectionStyle:Titanium.UI.iOS.ListViewCellSelectionStyle.NONE,name:\"elementTemplate\",},childTemplates:__alloyId158,};__alloyId155[\"elementTemplate\"]=__alloyId157;var __alloyId187=[];var __alloyId188={type:'Ti.UI.Label',bindId:'info',properties:{textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,color:\"black\",left:\"10dp\",top:0,bindId:\"info\",},};__alloyId187.push(__alloyId188);var __alloyId189={type:'Ti.UI.Label',bindId:'es_info',properties:{textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,font:{fontSize:\"14dp\",},left:\"10dp\",top:\"25dp\",color:\"blue\",bindId:\"es_info\",},};__alloyId187.push(__alloyId189);var __alloyId186 = {properties:{name:\"template\",},childTemplates:__alloyId187,};__alloyId155[\"template\"]=__alloyId186;var __alloyId192=[];var __alloyId194={type:'Ti.UI.View',childTemplates: (function() {var __alloyId195=[];var __alloyId197={type:'Ti.UI.Label',bindId:'QuestionDesc',properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,left:22,top:10,verticalAlign:\"top\",color:\"black\",font:{fontSize:20,},bindId:\"QuestionDesc\",},};__alloyId195.push(__alloyId197);var __alloyId199={type:'Ti.UI.View',bindId:'commentPhotosContainer',childTemplates: (function() {var __alloyId200=[];var __alloyId202={type:'Ti.UI.Label',bindId:'zero',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"zero\",text:0,right:120,top:0,},};__alloyId200.push(__alloyId202);var __alloyId204={type:'Ti.UI.Label',bindId:'one',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"one\",text:1,right:60,top:0,},};__alloyId200.push(__alloyId204);var __alloyId206={type:'Ti.UI.Label',bindId:'two',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"two\",text:2,right:2,top:0,},};__alloyId200.push(__alloyId206);var __alloyId208={type:'Ti.UI.Label',bindId:'three',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"three\",text:3,right:120,top:60,},};__alloyId200.push(__alloyId208);var __alloyId210={type:'Ti.UI.Label',bindId:'four',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"four\",text:4,right:60,top:60,},};__alloyId200.push(__alloyId210);var __alloyId212={type:'Ti.UI.Label',bindId:'five',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"five\",text:5,right:2,top:60,},};__alloyId200.push(__alloyId212);var __alloyId214={type:'Ti.UI.Label',bindId:'fo',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"fo\",text:\"FO\",right:10,top:60,},};__alloyId200.push(__alloyId214);var __alloyId216={type:'Ti.UI.TextArea',bindId:'commentTxtArea',properties:{color:Alloy.CFG.borderColor,top:0,hintText:\"comment....\",padding:{right:3,},font:{fontSize:18,},height:57,left:22,right:200,borderColor:\"#115EAC\",borderWidth:1,borderRadius:6,keyboardType:Ti.UI.KEYBOARD_DEFAULT,returnKeyType:Ti.UI.RETURNKEY_DONE,bindId:\"commentTxtArea\",},events:{blur:saveComment,focus:showAlertdialog,},};__alloyId200.push(__alloyId216);var __alloyId218={type:'Ti.UI.ImageView',bindId:'camera',properties:{bottom:15,image:\"/images/icons/camera.png\",width:40,height:35,left:30,bindId:\"camera\",},};__alloyId200.push(__alloyId218);var __alloyId220={type:'Ti.UI.ImageView',bindId:'Image',properties:{bottom:5,image:\"/images/Carrefour-Logo.jpg\",width:75,height:75,bindId:\"Image\",left:85,},};__alloyId200.push(__alloyId220);var __alloyId222={type:'Ti.UI.ImageView',bindId:'Image1',properties:{bottom:5,image:\"/images/Carrefour-Logo.jpg\",width:75,height:75,bindId:\"Image1\",left:165,},};__alloyId200.push(__alloyId222);return __alloyId200;})(),properties:{top:10,height:115,bindId:\"commentPhotosContainer\",},};__alloyId195.push(__alloyId199);return __alloyId195;})(),properties:{layout:\"vertical\",height:Ti.UI.SIZE,},};__alloyId192.push(__alloyId194);var __alloyId191 = {properties:{width:\"100%\",height:Ti.UI.SIZE,selectionStyle:Titanium.UI.iOS.ListViewCellSelectionStyle.NONE,name:\"elementFuckedTemplate\",},childTemplates:__alloyId192,};__alloyId155[\"elementFuckedTemplate\"]=__alloyId191;var __alloyId225=[];var __alloyId227={type:'Ti.UI.View',childTemplates: (function() {var __alloyId228=[];var __alloyId230={type:'Ti.UI.Label',bindId:'QuestionDesc',properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,left:22,top:10,verticalAlign:\"top\",color:\"black\",font:{fontSize:20,},bindId:\"QuestionDesc\",},};__alloyId228.push(__alloyId230);var __alloyId232={type:'Ti.UI.View',bindId:'commentPhotosContainer',childTemplates: (function() {var __alloyId233=[];var __alloyId235={type:'Ti.UI.Label',bindId:'yes',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"yes\",text:\"Yes\",right:100,top:0,},};__alloyId233.push(__alloyId235);var __alloyId237={type:'Ti.UI.Label',bindId:'no',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"no\",text:\"No\",right:10,top:0,},};__alloyId233.push(__alloyId237);var __alloyId239={type:'Ti.UI.Label',bindId:'na',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"na\",text:\"NA\",right:100,top:60,},};__alloyId233.push(__alloyId239);var __alloyId241={type:'Ti.UI.Label',bindId:'pd',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"pd\",text:\"PD\",right:10,top:60,},};__alloyId233.push(__alloyId241);var __alloyId243={type:'Ti.UI.Label',bindId:'fo',properties:{textAlign:\"center\",width:80,height:50,color:\"white\",font:{fontSize:22,fontWeight:\"bold\",},backgroundColor:\"gray\",borderRadius:6,bubbleParent:true,bindId:\"fo\",text:\"FO\",right:10,top:60,},};__alloyId233.push(__alloyId243);var __alloyId245={type:'Ti.UI.Label',bindId:'zero',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"red\",borderRadius:25,bubbleParent:true,bindId:\"zero\",text:0,right:120,top:0,},};__alloyId233.push(__alloyId245);var __alloyId247={type:'Ti.UI.Label',bindId:'one',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"yellow\",borderRadius:25,bubbleParent:true,bindId:\"one\",text:1,right:60,top:0,},};__alloyId233.push(__alloyId247);var __alloyId249={type:'Ti.UI.Label',bindId:'two',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"green\",borderRadius:25,bubbleParent:true,bindId:\"two\",text:2,right:2,top:0,},};__alloyId233.push(__alloyId249);var __alloyId251={type:'Ti.UI.Label',bindId:'three',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"three\",text:3,right:120,top:60,},};__alloyId233.push(__alloyId251);var __alloyId253={type:'Ti.UI.Label',bindId:'four',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"four\",text:4,right:60,top:60,},};__alloyId233.push(__alloyId253);var __alloyId255={type:'Ti.UI.Label',bindId:'five',properties:{textAlign:\"center\",width:50,height:50,color:\"white\",font:{fontSize:15,fontWeight:\"bold\",},backgroundColor:\"#5BCAFF\",borderRadius:25,bubbleParent:true,bindId:\"five\",text:5,right:2,top:60,},};__alloyId233.push(__alloyId255);var __alloyId257={type:'Ti.UI.TextArea',bindId:'commentTxtArea',properties:{color:Alloy.CFG.borderColor,top:0,hintText:\"comment....\",padding:{right:3,},font:{fontSize:18,},height:57,left:22,right:200,borderColor:\"#115EAC\",borderWidth:1,borderRadius:6,keyboardType:Ti.UI.KEYBOARD_DEFAULT,returnKeyType:Ti.UI.RETURNKEY_DONE,enabled:false,bindId:\"commentTxtArea\",},};__alloyId233.push(__alloyId257);var __alloyId259={type:'Ti.UI.ImageView',bindId:'camera',properties:{bottom:15,image:\"/images/icons/camera.png\",width:40,height:35,left:30,bindId:\"camera\",},};__alloyId233.push(__alloyId259);var __alloyId261={type:'Ti.UI.ImageView',bindId:'Image',properties:{bottom:5,image:\"/images/Carrefour-Logo.jpg\",width:75,height:75,bindId:\"Image\",left:85,autorotate:true,},};__alloyId233.push(__alloyId261);var __alloyId263={type:'Ti.UI.ImageView',bindId:'Image1',properties:{bottom:5,image:\"/images/Carrefour-Logo.jpg\",width:75,height:75,bindId:\"Image1\",left:165,autorotate:true,},};__alloyId233.push(__alloyId263);return __alloyId233;})(),properties:{top:10,height:115,bindId:\"commentPhotosContainer\",},};__alloyId228.push(__alloyId232);return __alloyId228;})(),properties:{layout:\"vertical\",height:Ti.UI.SIZE,},};__alloyId225.push(__alloyId227);var __alloyId224 = {properties:{width:\"100%\",height:Ti.UI.SIZE,selectionStyle:Titanium.UI.iOS.ListViewCellSelectionStyle.NONE,name:\"disabledElementTemplate\",},childTemplates:__alloyId225,};__alloyId155[\"disabledElementTemplate\"]=__alloyId224;$.__views[\"list\"] = Ti.UI.createListView(\n{defaultItemTemplate:\"elementTemplate\",templates:__alloyId155,id:\"list\",}\n);\n$.__views[\"questions\"].add($.__views[\"list\"]);\nlistClicked?$.addListener($.__views[\"list\"],'itemclick',listClicked):__defers['$.__views[\"list\"]!itemclick!listClicked']=true;var __alloyId265 = [];__alloyId265.push(\"Save\");__alloyId265.push(\"Cancel\");$.__views[\"commentAlert\"] = Ti.UI.createAlertDialog(\n{buttonNames:__alloyId265,message:\"Enter question Comment\",width:\"70%\",id:\"commentAlert\",}\n);\nvar __alloyId269 = [];__alloyId269.push(\"Camera\");__alloyId269.push(\"Gallery\");__alloyId269.push(\"Cancel\");$.__views[\"confirmAlert\"] = Ti.UI.createAlertDialog(\n{buttonNames:__alloyId269,message:\"Select the source of the image\",id:\"confirmAlert\",}\n);\nvar __alloyId274 = [];__alloyId274.push(\"Yes\");__alloyId274.push(\"No\");$.__views[\"deleteImage\"] = Ti.UI.createAlertDialog(\n{buttonNames:__alloyId274,message:\"Are you sure you want to delete this image?\",id:\"deleteImage\",}\n);\nexports.destroy = function () {};\n\n\t// make all IDed elements in $.__views available right on the $ in a\n\t// controller's internal code. Externally the IDed elements will\n\t// be accessed with getView().\n\t_.extend($, $.__views);\n\n\t// Controller code directly from the developer's controller file\n\t__MAPMARKER_CONTROLLER_CODE__\n\n\t// Generated code that must be executed after all UI and\n\t// controller code. One example deferred event handlers whose\n\t// functions are not defined until after the controller code\n\t// is executed.\n\t__defers['$.__views[\"list\"]!itemclick!listClicked'] && $.addListener($.__views[\"list\"],'itemclick',listClicked);\n\n\t// Extend the $ instance with all functions and properties\n\t// defined on the exports object.\n\t_.extend($, exports);\n}\n\nmodule.exports = Controller;\n","var args = arguments[0] || {},\nganswerId = null,\nisScoreCard = args.template.type == 2;\nif (args.notEditable) {// show search bar when not inComplete\n  $.list.defaultItemTemplate = 'disabledElementTemplate';\n  $.list.searchView = Ti.UI.createSearchBar({\n    hintText: \"Search ...\",\n    barColor: \"#115EAC\",\n    keyboardType: Titanium.UI.RETURNKEY_SEARCH,\n    returnKeyType: Titanium.UI.RETURNKEY_SEARCH });\n\n  if (OS_IOS) {\n    $.list.setTop(62);\n  }\n  $.questions.autoAdjustScrollViewInsets = false;\n}\n\nif (OS_IOS) {\n  $.questions.setTitle(args.template.title);\n}\n\nfunction protectPreviousAnswer(e) {\n  e.source.value = e.source.protectedValue;\n}\n\nfunction protectPreviousAnswerValue(e) {\n  e.source.value = e.source.protectedValue;\n}\n\n// else {\n// $.questions.windowSoftInputMode = Ti.UI.Android.SOFT_INPUT_ADJUST_RESIZE;\n// }\n\n//$.questions.windowSoftInputMode = Titanium.UI.Android.SOFT_INPUT_ADJUST_PAN;\n\nvar secsCollaction = Alloy.createCollection('sections');\n\nsecsCollaction.on('fetch', function () {\n  var sections = [];\n  if (args.deptCode == 'SRC')\n  $.list.defaultItemTemplate = 'elementFuckedTemplate';\n  if (secsCollaction.models.length == 0) {\n\n    var model = Alloy.createModel('sections');\n    model.fetch({\n      id: args.section.SectionID + \"-\" + args.AuditID });\n\n\n    $.list.setSections([Alloy.createController('audit/question_section', {\n      SectionID: model.get('SectionID'),\n      AuditID: model.get('AuditID'),\n      auditRecordID: args.auditRecordID,\n      deptCode: args.deptCode,\n      title: model.get('SectionDesc'),\n      weightTotal: args.section.weightTotal,\n      weight: model.getWeight(args.auditRecordID), // get weight of answered questions\n      notEditable: args.notEditable,\n      isIncomplete: args.isIncomplete,\n      template: args.template }).\n    getView()]);\n    return;\n  }\n\n  secsCollaction.each(function (model) {\n    //Ti.API.Info(\"YooKASSEM SectionDesc=\" + JSON.stringify(model.get('SectionDesc')));\n    sections.push(Alloy.createController('audit/question_section', {\n      SectionID: model.get('SectionID'),\n      AuditID: model.get('AuditID'),\n      auditRecordID: args.auditRecordID,\n      deptCode: args.deptCode,\n      title: model.get('SectionDesc'),\n      weightTotal: model.getSectionWeight(model.get('AuditID'), model.get('SectionID')), //model.get('weightTotal'),\n      weight: model.getWeight(args.auditRecordID), // get weight of answered questions\n      notEditable: args.notEditable,\n      isIncomplete: args.isIncomplete,\n      template: args.template }).\n    getView());\n\n    var subSecsCollaction = Alloy.createCollection('sections');\n    var query = \"SELECT s.*\" + \" FROM sections s  WHERE  s.ParentID = '\" + model.get('SectionID') + \"' group by s.SectionID ORDER BY s.SectionOrder\";\n\n    subSecsCollaction.on('fetch', function () {\n      subSecsCollaction.each(function (model2) {\n        //Ti.API.Info(\"YooSUBSECTION KASSEM SectionDesc=\" + JSON.stringify(model2.get('SectionDesc'))+\" SECTIONID=\"+ model2.get(\"SectionID\"));\n        //Ti.API.Info(\"FuckedID= \"+model2.get(\"FuckedID\"));\n        sections.push(Alloy.createController('audit/section_template', {\n          info: model2.get('SectionDesc'),\n          es_info: model2.get('SectionDesc'),\n          model: model,\n          AuditID: args.AuditID,\n          auditRecordID: args.auditRecordID,\n          deptCode: args.deptCode,\n          section: { SectionID: model2.get(\"SectionID\") },\n          notEditable: args.notEditable,\n          saveCallBack: args.saveCallBack,\n          refreshSections: args.refreshSections,\n          template: args.template }).\n        getView());\n      });\n    });\n    subSecsCollaction.fetch({\n      query: query });\n\n\n  });\n\n  $.list.setSections(sections);\n\n});\n\nvar tableName = isScoreCard ? 'questions_scorecard' : 'questions',\nselect = isScoreCard ? \"\" : \", IFNULL(sum(q.QWeight), 0) weightTotal \";\nquery = \"SELECT s.*\" + select + \" FROM sections s JOIN \" + tableName + \" q ON q.AuditID = s.AuditID AND q.SectionID = s.SectionID WHERE s.AuditID = '\" + args.AuditID + \"' AND s.ParentID = '\" + args.section.SectionID + \"' group by s.SectionID ORDER BY s.SectionOrder\";\nif (Alloy.Globals.HasLP) {\n  //select = isScoreCard ? \"\" : \", IFNULL(sum(q.QWeight), 0) weightTotal \";\n  query = \"SELECT s.*\" + select + \" FROM sections s JOIN \" + tableName + \" q ON q.AuditID = s.AuditID  WHERE s.AuditID = '\" + args.AuditID + \"' AND s.ParentID = '\" + args.section.SectionID + \"' group by s.SectionID ORDER BY s.SectionOrder\";\n}\n//Ti.API.Info(\"Yoo Query is: \" + query);\ntry {\n  secsCollaction.fetch({\n    query: query });\n\n} catch (e) {\n  //Ti.API.Info('error -> '+JSON.stringify(e));\n}\n\n\nfunction listClicked(e) {\n\n  if (args.notEditable) {\n\n    return false;\n  }\n\n  var item = e.section.getItemAt(e.itemIndex),\n  Answerstring = null,\n  Answervalue = null,\n  QuestionValue = null,\n  Qweight = null,\n  AnswerDate = null,\n  updateRecord = false;\n  //Ti.API.Info(\"the list item:\" + JSON.stringify(item));\n\n  if (e.bindId == \"yes\") {\n    if (item.yes.backgroundColor == \"green\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"Yes\";\n      Answervalue = item.QWeight;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.yes.backgroundColor = \"green\";\n      item.no.backgroundColor = \"gray\";\n      item.na.backgroundColor = \"gray\";\n      item.pd.backgroundColor = \"gray\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n    }\n  } else if (e.bindId == \"no\") {\n    if (item.no.backgroundColor == \"red\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"No\";\n      Answervalue = 0;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.no.backgroundColor = \"red\";\n      item.yes.backgroundColor = \"gray\";\n      item.na.backgroundColor = \"gray\";\n      item.pd.backgroundColor = \"gray\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n    }\n  } else if (e.bindId == \"na\") {\n    if (item.na.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"NA\";\n      Answervalue = 0;\n      QuestionValue = 0;\n      Qweight = item.QWeight;\n      item.na.backgroundColor = \"#333333\";\n      item.yes.backgroundColor = \"gray\";\n      item.no.backgroundColor = \"gray\";\n      item.pd.backgroundColor = \"gray\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n    }\n  } else if (e.bindId == \"pd\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"PD\";\n      Answervalue = item.QWeight * 0.5;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.pd.backgroundColor = \"#333333\";\n      item.yes.backgroundColor = \"gray\";\n      item.no.backgroundColor = \"gray\";\n      item.na.backgroundColor = \"gray\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n    // Add New Answer by Hassan Abouzeid\n\n  } else if (e.bindId == \"fo\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"FO\";\n      Answervalue = item.QWeight * 0.5;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.pd.backgroundColor = \"#333333\";\n      item.yes.backgroundColor = \"gray\";\n      item.no.backgroundColor = \"gray\";\n      item.na.backgroundColor = \"gray\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"zero\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"0\";\n      Answervalue = item.QWeight * 1;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.zero.backgroundColor = \"#0BD318\";\n      item.one.backgroundColor = \"#77adf5\";\n      item.two.backgroundColor = \"#609ff3\";\n      item.three.backgroundColor = \"#4a92f2\";\n      item.four.backgroundColor = \"#3384f0\";\n      item.five.backgroundColor = \"#1d77ef\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"one\") {\n\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"1\";\n      Answervalue = item.QWeight * 1;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.zero.backgroundColor = \"#8ebbf7\";\n      item.one.backgroundColor = \"#0BD318\";\n      item.two.backgroundColor = \"#609ff3\";\n      item.three.backgroundColor = \"#4a92f2\";\n      item.four.backgroundColor = \"#3384f0\";\n      item.five.backgroundColor = \"#1d77ef\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"two\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"2\";\n      Answervalue = item.QWeight * 1;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.zero.backgroundColor = \"#8ebbf7\";\n      item.one.backgroundColor = \"#77adf5\";\n      item.two.backgroundColor = \"#0BD318\";\n      item.three.backgroundColor = \"#4a92f2\";\n      item.four.backgroundColor = \"#3384f0\";\n      item.five.backgroundColor = \"#1d77ef\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"three\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"3\";\n      Answervalue = item.QWeight * 1;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.zero.backgroundColor = \"#8ebbf7\";\n      item.one.backgroundColor = \"#77adf5\";\n      item.two.backgroundColor = \"#609ff3\";\n      item.three.backgroundColor = \"#0BD318\";\n      item.four.backgroundColor = \"#3384f0\";\n      item.five.backgroundColor = \"#1d77ef\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"four\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"4\";\n      Answervalue = item.QWeight * 1;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.zero.backgroundColor = \"#8ebbf7\";\n      item.one.backgroundColor = \"#77adf5\";\n      item.two.backgroundColor = \"#609ff3\";\n      item.three.backgroundColor = \"#4a92f2\";\n      item.four.backgroundColor = \"#0BD318\";\n      item.five.backgroundColor = \"#1d77ef\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"five\") {\n    if (item.pd.backgroundColor == \"#333333\") {\n      deleteRecord();\n    } else {\n      updateRecord = true;\n      AnswerDate = Alloy.Globals.getFullDate();\n      Answerstring = \"5\";\n      Answervalue = item.QWeight * 1;\n      QuestionValue = item.QValue;\n      Qweight = item.QWeight;\n      item.zero.backgroundColor = \"#8ebbf7\";\n      item.one.backgroundColor = \"#77adf5\";\n      item.two.backgroundColor = \"#609ff3\";\n      item.three.backgroundColor = \"#4a92f2\";\n      item.four.backgroundColor = \"#3384f0\";\n      item.five.backgroundColor = \"#0BD318\";\n\n      e.section.updateItemAt(e.itemIndex, item);\n\n    }\n\n  } else if (e.bindId == \"camera\") {\n    ganswerId = item.properties.id;\n\n    // assign the question ID to a golbal var ganswerId\n    $.confirmAlert.addEventListener(\"click\", imageSource);\n\n    function imageSource(ev) {\n      if (ev.index == 0) {\n        camera({\n          section: e.section,\n          itemIndex: e.itemIndex,\n          item: item,\n          answerID: item.properties.answerID });\n\n\n      } else if (ev.index == 1) {\n        photoGallery({\n          section: e.section,\n          itemIndex: e.itemIndex,\n          item: item,\n          answerID: item.properties.answerID });\n\n\n      }\n      $.confirmAlert.removeEventListener(\"click\", imageSource);\n    }\n\n\n    $.confirmAlert.show();\n\n  } else if (e.bindId == \"Image\" && item.Image.image !== null) {// the first Image\n\n    $.deleteImage.addEventListener(\"click\", deleteImage);\n\n    function deleteImage(ev) {\n      if (ev.index == 0) {\n\n        deleteFileSystem(item.Image.image);\n        item.Image.image = null;\n\n        var answerModel = Alloy.createModel('answers');\n\n        answerModel.fetch({\n          id: item.properties.answerID });\n\n\n        answerModel.save({\n          //Comment : answerModel.get(\"Comment\"),\n          Image: null });\n\n        if (item.Image1.image == null) {\n          item.commentPhotosContainer.height = 115;\n        }\n        e.section.updateItemAt(e.itemIndex, item);\n\n      }\n      $.deleteImage.removeEventListener(\"click\", deleteImage);\n    }\n\n\n    $.deleteImage.show();\n\n  } else if (e.bindId == \"Image1\" && item.Image1.image !== null) {\n\n    $.deleteImage.addEventListener(\"click\", deleteImage1);\n\n    function deleteImage1(ev) {\n      if (ev.index == 0) {\n\n        deleteFileSystem(item.Image1.image);\n        item.Image1.image = null;\n\n        var answerModel = Alloy.createModel('answers');\n\n        answerModel.fetch({\n          id: item.properties.answerID });\n\n\n        answerModel.save({\n          //Comment : answerModel.get(\"Comment\"),\n          Image1: null });\n\n        if (item.Image.image == null) {\n          item.commentPhotosContainer.height = 115;\n        }\n\n        e.section.updateItemAt(e.itemIndex, item);\n\n      }\n      $.deleteImage.removeEventListener(\"click\", deleteImage1);\n    }\n\n\n    $.deleteImage.show();\n\n  } else if (e.bindId == \"delete\") {\n    deleteRecord();\n  }\n\n  function deleteRecord() {\n    updateRecord = true,\n    AnswerDate = null, item.na.backgroundColor = \"gray\", item.yes.backgroundColor = \"gray\", item.no.backgroundColor = \"gray\", item.pd.backgroundColor = \"gray\",\n    Answerstring = null,\n    Qweight = null,\n    Answervalue = null, item.commentTxtArea.value = \"\", item.commentPhotosContainer.height = 115, deleteFileSystem(item.Image.image), item.Image.image = null, deleteFileSystem(item.Image1.image), item.Image1.image = null, e.section.updateItemAt(e.itemIndex, item);\n    /*if (e.bindId == \"pd\") {\n                                                                                                                                                                                                                                                                          var weight = 0.5 * parseFloat(item.properties.QWeight);\n                                                                                                                                                                                                                                                                         \t } else {\n                                                                                                                                                                                                                                                                          var weight = parseFloat(item.properties.QWeight);\n                                                                                                                                                                                                                                                                         \t }\n                                                                                                                                                                                                                                                                         \t var sectionNum = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText());\n                                                                                                                                                                                                                                                                          var total = sectionNum - weight;\n                                                                                                                                                                                                                                                                          alert(parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - weight);\n                                                                                                                                                                                                                                                                         \t if (total == 0) {\n                                                                                                                                                                                                                                                                          e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(0);\n                                                                                                                                                                                                                                                                          } else {\n                                                                                                                                                                                                                                                                          e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(total);\n                                                                                                                                                                                                                                                                          }\n                                                                                                                                                                                                                                                                         \t value = null;*/\n\n\n\n\n\n\n  }\n\n  if (updateRecord) {// make Sure that (yes,no,na,delete) is pressed to save this record\n    var answerModel = Alloy.createModel('answers');\n\n    answerModel.fetch({\n      id: item.properties.answerID });\n\n\n    if (Answerstring == null) {// preform delete\n      if (e.bindId == \"pd\") {\n        var weight = 0.5 * parseFloat(item.properties.QWeight);\n\n      } else {\n        var weight = parseFloat(item.properties.QWeight);\n      }\n\n      total = e.section.getHeaderView().getChildren()[1].getChildren()[0].getText() - weight;\n      e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(total);\n\n    } else if (answerModel.get('AnswerDate') == null) {// so the question didnt answered yet, now we can add it to the score\n\n      var weight = e.bindId == \"pd\" ? item.properties.QWeight * 0.5 : item.properties.QWeight;\n\n      var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) + weight;\n\n      e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n\n      // Add new answer by Hassan Abouzeid\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 0.5 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"FO\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 1 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"0\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 1 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"1\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 1 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"2\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 1 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"3\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 1 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"4\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 1 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"5\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      }\n\n    } else if (answerModel.get('AnswerDate') !== null && answerModel.get('Answerstring') !== Answerstring) {\n\n      var weight = 0.5 * item.properties.QWeight;\n      // user was pressed on another btn (y,n,na)\n      if (Answerstring == \"PD\") {// minus the Qweight first then add 0.5 * Qweight\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - item.properties.QWeight;\n\n        value = value + weight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n        // user was pressed on PD\n      } else if (answerModel.get('Answerstring') !== \"Yes\" && answerModel.get('Answerstring') !== \"No\" && answerModel.get('Answerstring') !== \"NA\") {\n\n        var value = parseFloat(e.section.getHeaderView().getChildren()[1].getChildren()[0].getText()) - weight;\n\n        value = value + item.properties.QWeight;\n        e.section.getHeaderView().getChildren()[1].getChildren()[0].setText(value);\n      }\n\n      value = null,\n      weight = null;\n\n    }\n\n    answerModel.save({\n      Answerstring: Answerstring,\n      Answervalue: Answervalue,\n      QuestionValue: QuestionValue,\n      Qweight: Qweight,\n      //Comment : item.comment.value == \"\" ? \"\" : answerModel.get(\"Comment\"),\n      AnswerDate: AnswerDate,\n      Image: item.Image.image,\n      Image1: item.Image1.image });\n\n    args.refreshSections();\n\n  }\n}\n\nfunction saveComment(e) {\n\n  item = e.section.getItemAt(e.itemIndex);\n\n  var answerModel = Alloy.createModel('answers');\n  answerModel.fetch({\n    id: item.properties.answerID });\n\n  answerModel.save({\n    Comment: e.value });\n\n\n  item.commentTxtArea.value = e.value;\n  e.section.updateItemAt(e.itemIndex, item);\n}\n\nfunction photoGallery(e) {\n\n  var currentTime = new Date();\n  Titanium.Media.openPhotoGallery({\n    allowEditing: true,\n    //arrowDirection : Titanium.UI.iPad.POPOVER_ARROW_DIRECTION_RIGHT,\n    autohide: true,\n    mediaTypes: Titanium.Media.MEDIA_TYPE_PHOTO,\n    success: function (event) {\n      //Ti.API.Info(JSON.stringify(event));\n\n      var image = event.media;\n\n      var imageAsTaken = Ti.UI.createImageView({\n        image: image });\n\n\n      //Ti.API.Info('image size before imgaeresize :' + image.size);\n      var newBlob;\n\n      // imageFile = imageAsTaken.toImage();\n      // Turn blob into a square thumbnail, only iphone :(\n      //imageFile = imageFile.imageAsThumbnail(120);\n      //Save local\n\n      //  image = ImageFactory.imageAsResized(image, { width: 640, height: 640 });\n      if (OS_IOS) {\n        newBlob = image.imageAsResized(640, 640);\n      } else {\n        var ImageFactory = require('ti.imagefactory');\n        newBlob = ImageFactory.imageAsResized(image, {\n          width: 640,\n          height: 640 });\n\n      }\n\n      //Ti.API.Info('image size after imgaeresize :' + newBlob.size);\n\n      var fileName = Ti.Filesystem.applicationDataDirectory + '/images' + currentTime.getTime() + ganswerId + '.jpg';\n      var f = Ti.Filesystem.getFile(fileName);\n      f.write(newBlob);\n\n      var answerModel = Alloy.createModel('answers');\n\n      answerModel.fetch({\n        id: e.answerID });\n\n\n      if (e.item.Image.image == null) {// this means that the first image is empty\n        e.item.Image.image = f.nativePath;\n\n        answerModel.save({\n          Image: newBlob });\n\n\n      } else {\n        e.item.Image1.image = f.nativePath;\n        answerModel.save({\n          Image1: newBlob });\n\n\n      }\n\n      e.item.commentPhotosContainer.height = 145;\n      e.section.updateItemAt(e.itemIndex, e.item);\n\n      ganswerId = null;\n      // null the global var ganswerId\n    } });\n\n}\n\nfunction camera(e) {\n\n  var currentTime = new Date();\n  Titanium.Media.showCamera({\n    success: function (event) {\n\n      // called when media returned from the camera\n      Ti.API.debug('Our type was: ' + event.mediaType);\n      if (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {\n        var image = event.media;\n\n        var imageAsTaken = Ti.UI.createImageView({\n          image: image });\n\n\n        //Ti.API.Info('image size before imgaeresize :' + image.size);\n        var newBlob;\n\n        // imageFile = imageAsTaken.toImage();\n        // Turn blob into a square thumbnail, only iphone :(\n        //imageFile = imageFile.imageAsThumbnail(120);\n        //Save local\n\n        //  image = ImageFactory.imageAsResized(image, { width: 640, height: 640 });\n        if (OS_IOS) {\n          newBlob = image.imageAsResized(640, 640);\n        } else {\n          var ImageFactory = require('fh.imagefactory');\n          ImageFactory.rotateResizeImage(image.nativePath, 300, 70);\n          newBlob = image;\n        }\n\n        //Ti.API.Info('image size after imgaeresize :' + newBlob.size);\n\n        var fileName = Ti.Filesystem.applicationDataDirectory + '/images' + currentTime.getTime() + ganswerId + '.jpg';\n        var f = Ti.Filesystem.getFile(fileName);\n        f.write(newBlob);\n\n        var answerModel = Alloy.createModel('answers');\n\n        answerModel.fetch({\n          id: e.answerID });\n\n\n        if (e.item.Image.image == null) {// this means that the first image is empty\n          e.item.Image.image = f.nativePath;\n\n          answerModel.save({\n            Image: newBlob });\n\n\n        } else {\n          e.item.Image1.image = f.nativePath;\n          answerModel.save({\n            Image1: newBlob });\n\n\n        }\n\n        e.item.commentPhotosContainer.height = 145;\n        e.section.updateItemAt(e.itemIndex, e.item);\n\n        ganswerId = null;\n\n        // null the global var ganswerId\n      } else {\n\n        alert(\"thats not an image\");\n\n      }\n\n      ganswerId = null;\n    },\n    cancel: function () {\n      // called when user cancels taking a picture\n      ganswerId = null;\n    },\n    error: function (error) {\n      // called when there's an error\n      var a = Titanium.UI.createAlertDialog({\n        title: 'Camera' });\n\n      if (error.code == Titanium.Media.NO_CAMERA) {\n        a.setMessage('Please run this test on device');\n      } else {\n        a.setMessage('Unexpected error: ' + error.code);\n      }\n      a.show();\n      ganswerId = null;\n    },\n    saveToPhotoGallery: true,\n    mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO] });\n\n\n}\n\nif (!args.notEditable) {\n\n  if (OS_ANDROID) {\n    Alloy.Globals.activeView = 2;\n    Alloy.Globals.saveQuestions = function () {\n      Alloy.Globals.pageStack.close($.questions);\n      args.saveCallBack();\n      resetNavBar();\n    };\n    Alloy.Globals.backQuestions = function () {\n      Alloy.Globals.pageStack.close($.questions);\n      resetNavBar();\n    };\n    Alloy.Globals.activity.invalidateOptionsMenu();\n\n  }\n\n  if (OS_IOS) {\n    var saveBtn = Ti.UI.createButton({\n      image: '/images/icons/save.png' });\n\n    saveBtn.addEventListener('click', function () {\n      Alloy.Globals.pageStack.close($.questions);\n      args.saveCallBack();\n    });\n    $.questions.setRightNavButton(saveBtn);\n\n    var closeBtn = Ti.UI.createButton({\n      image: '/images/icons/back.png' });\n\n    closeBtn.addEventListener('click', function () {\n      Alloy.Globals.pageStack.close($.questions);\n    });\n    $.questions.setLeftNavButton(closeBtn);\n  }\n  // else {\n  //\n  // var activity = Ti.Android.currentActivity;\n  // // need to explicitly use getXYZ methods\n  // var actionBar = activity.getActionBar();\n  //\n  // if (actionBar) {\n  // // Now we can do stuff to the actionbar\n  // actionBar.setTitle(args.template.title);\n  //\n  // actionBar.setIcon('/images/appicon.png');\n  //\n  // activity.onCreateOptionsMenu = function(e) {\n  // var menuItem2 = e.menu.add({\n  // showAsAction : Ti.Android.SHOW_AS_ACTION_ALWAYS,\n  // icon : \"/images/icons/back.png\"\n  // });\n  // menuItem2.addEventListener(\"click\", function() {\n  // Alloy.Globals.pageStack.close($.questions);\n  // resetNavBar();\n  // });\n  //\n  // var menuItem = e.menu.add({\n  // showAsAction : Ti.Android.SHOW_AS_ACTION_ALWAYS,\n  // icon : \"/images/icons/save.png\"\n  // });\n  // menuItem.addEventListener(\"click\", function() {\n  // Alloy.Globals.pageStack.close($.questions);\n  // args.saveCallBack();\n  // resetNavBar();\n  // });\n  //\n  //\n  // };\n  // activity.invalidateOptionsMenu();\n  //\n  // // show an angle bracket next to the home icon,\n  // // indicating to users that the home icon is tappable\n  // //actionBar.setDisplayHomeAsUp(true);\n  //\n  // // toggle the left window when the home icon is selected\n  // // actionBar.onHomeIconItemSelected = function() {\n  // // Ti.API.log('home button clicked');\n  // // $.drawer.toggleLeftWindow();\n  // // };\n  // }\n\n  //}\n}\n// else{\n//\n// //Ti.API.Info (\"before creating Activity\");\n// var activity = Ti.Android.currentActivity;\n// activity.onCreateOptionsMenu = function(e){\n// //Ti.API.Info (\"before var menu\");\n// var menu = e.menu;\n// //Ti.API.Info (\"after var menu\");\n// var menuItem = menu.add({ title: 'Save'});\n// menuItem.setIcon('/images/icons/save.png');\n// menuItem.addEventListener('click', save);\n// ////Ti.API.Info (\"before back\");\n// var menuItemBack = menu.add({ title: 'Back'});\n// menuItemBack.setIcon('/images/icons/back.png');\n// menuItemBack.addEventListener('click', close);\n// };\n//\n//\n// }\n\n// var saveBtn = Ti.UI.createButton({\n// image:'/images/icons/save.png'\n// });\n// saveBtn.addEventListener('click', function() {\n// Alloy.Globals.pageStack.close($.questions);\n// args.saveCallBack();\n// });\n// $.questions.setRightNavButton(saveBtn);\n//\n// var closeBtn = Ti.UI.createButton({\n//\n// image:'/images/icons/back.png'\n// });\n// closeBtn.addEventListener('click', function() {\n// Alloy.Globals.pageStack.close($.questions);\n// });\n// $.questions.setLeftNavButton(closeBtn);\n//}\n\nfunction deleteFileSystem(name) {\n\n  var f = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, name);\n\n  if (f.exists()) {\n\n    f.deleteFile();\n\n  }\n\n}\n\n$.questions.addEventListener(\"close\", function () {\n  $.destroy();\n});\n\nfunction showAlertdialog(e) {\n  if (OS_IOS || args.notEditable) {\n    // var item = e.section.getItemAt(e.itemIndex);\n    // item.commentTxtArea.enabled = false;\n    return;\n  }\n  $.commentAlert.show();\n  var item = e.section.getItemAt(e.itemIndex);\n\n  //\n  //Ti.API.Info(\"the e is \" + JSON.stringify(item.commentTxtArea));\n  $.editText.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS);\n  $.editText.focus();\n  $.editText.value = item.commentTxtArea.value;\n  $.commentAlert.addEventListener(\"click\", imageSource);\n\n  function imageSource(ev) {\n    if (ev.index == 0) {\n      var answerModel = Alloy.createModel('answers');\n      answerModel.fetch({\n        id: item.properties.answerID });\n\n      answerModel.save({\n        Comment: $.editText.value });\n\n\n      item.commentTxtArea.value = $.editText.value;\n      e.section.updateItemAt(e.itemIndex, item);\n    } else if (ev.index == 1) {\n    }\n    $.commentAlert.removeEventListener(\"click\", imageSource);\n  }\n\n}\n\nfunction resetNavBar() {\n\n  //Ti.API.Info(\"reseting nav bar\");\n  if (OS_ANDROID) {\n    Alloy.Globals.activeView = 1;\n    Alloy.Globals.activity.invalidateOptionsMenu();\n  }\n  // if(OS_IOS)\n  // return;\n  // var activity = Ti.Android.currentActivity;\n  // // need to explicitly use getXYZ methods\n  // var actionBar = activity.getActionBar();\n  //\n  // if (actionBar) {\n  // // Now we can do stuff to the actionbar\n  // actionBar.setTitle('iProductive');\n  //\n  // actionBar.setIcon('/images/appicon.png');\n  //\n  // activity.onCreateOptionsMenu = function(e) {\n  // var menuItem = e.menu.add({\n  // showAsAction : Ti.Android.SHOW_AS_ACTION_ALWAYS,\n  // icon : \"/images/user.png\"\n  // });\n  // menuItem.addEventListener(\"click\", function(e) {\n  // Ti.API.log('right button clicked');\n  // var win = Ti.UI.createWindow({\n  // title : 'Profile'\n  // });\n  // var profile = Alloy.createController('profile');\n  // profile.on('logout', function() {\n  // win.close();\n  // });\n  // win.add(profile.getView());\n  // win.open();\n  // });\n  // };\n  // activity.invalidateOptionsMenu();\n  //\n  // // show an angle bracket next to the home icon,\n  // // indicating to users that the home icon is tappable\n  // //actionBar.setDisplayHomeAsUp(true);\n  //\n  // // toggle the left window when the home icon is selected\n  // // actionBar.onHomeIconItemSelected = function() {\n  // // Ti.API.log('home button clicked');\n  // // $.drawer.toggleLeftWindow();\n  // // };\n  // }\n}"]}